# EmployeesConsoleApp

# Задача:
Необходимо создать консольное приложение, обрабатывающее текстовый файл, содержащий список сотрудников в формате JSON. Формат записи о сотруднике:
- Id
- FirstName
- LastName
- SalaryPerHour

Приложение принимает входные аргументы (в string[] args метода Main), и на их основе выполняет соответствующую операцию.

Доступны следующие аргументы и операции:

1. -add FirstName:John LastName:Doe Salary:100.50

Добавляет в файл новую запись. Поля FirstName, LastName и SalaryPerHour заполняются из аргументов (John, Doe, 100.50). Поле Id генерируется автоматически по следующему принципу: самое большое значение столбца Id, из всех имеющихся в файле, + 1.

2. -update Id:123 FirstName:James

Обновляет запись с Id=123, меняет в нем поле FirstName на указанное (James). Таким образом можно обновлять любые поля, кроме Id. Если не существует записи с таким Id, в консоль выводится строка, сообщающая об ошибке.

3. -get Id:123

Выводит в консоль строку формата «Id = {Id}, FirstName = {FirstName}, LastName = {LastName}, SalaryPerHour = {SalaryPerHour}». Если не существует записи с таким Id, в консоль выводится строка, сообщающая об ошибке.

4. -delete Id:123

Удаляет запись с Id=123 из файла. Если не существует записи с таким Id, в консоль выводится строка, сообщающая об ошибке.

5. -getall 

Получение информации о всех сотрудниках в формате аналогичном операции -get.

# Описание разработки
Используемые библиотеки:
- Newtonsoft.Json

Фреймворк юнит-тестирования:
- xUnit 

Используемые библиотеки для юнит-тестирования:
- Moq
- Newtonsoft.Json

Путь для размещения файла и имя файла, в котором будут храниться данные, ведется в классе StaticDetails.cs (также класс хранит необходимые константы).
По умолчанию для хранилища данных используется папка Temp, в ней создается (если нет, то автоматически) папка EmployeeDb и в ней уже файл EmployeeData.txt.

Архитектура приложения:
![image](https://github.com/OgOlegator/EmployeesConsoleApp/assets/92753056/c6720867-7d6b-40b4-b6da-8d477e1acf6d)

Точкой входа в приложения является класс Program.cs. 
В нем иницилизируется контроллер (EmployeeController.cs) и контекст (TextFileContext.cs).
А также парсится входной параметр args, который содержит входящую команду для приложения, с помощью CommandParser.cs

TextFileContext - Класс для работы с контекстом файла хранилища данных, позволяет установить путь до файла, получить данные из файла и сохранить данные в файл.
Содержит в себе DataSet - класс, который работает с набором данных из хранилища.

TextFileContext и DataSet - являются обощенными и работают с типами реализующими интерфейс IDataElement, который содержит лишь свойство Id (IDataElement нужен для корректной реализации условия задачи "Поле Id генерируется автоматически по следующему принципу: самое большое значение столбца Id, из всех имеющихся в файле, + 1", так как иначе было бы затруднительнее устанавливать наличие поля Id).

Почему класс TextFileContextи DataSet являются обобщенным? По идее они могли бы использовать одну лишь модель Employee вместо обобщенного типа, который, к тому же, и так один в проекте :), но здесь я решил оставить простор для возможного использования данного класса в будущем, либо расширения его возможностей на использование нескольких классов DataSet.

EmployeeController - Инкапсулирует операции, которые приходят на вход Program.

Примечания:
1) При передаче числа на вход приложению в параметре "Salary:" нужно учитывать системный разделитель, т.к. если в качестве разделителя указана точка, а в системе используется запятая -> Salary = 0;

